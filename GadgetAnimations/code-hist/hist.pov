//camera {
//   location <0.0,0.5,1.5>
//   up       y
//   right    x
//   angle    60
//   look_at  <0,0,0>
//}

//light_source {
//   <5,5,5>
//   color rgb <1,1,1>
//   media_interaction off
//   media_attenuation off
//}
#declare pos = <2.,1.2,1.3>;
background {rgb 0}
camera {right x*1 location pos look_at <.5,.3,.5>}
light_source {pos*1.5 color rgb 1.}

   #declare NX = 1;
   #declare NY = 1;
   #declare NZ = 1;

   #declare theinterior = interior {
      media {
         intervals 255
         ratio 0.5
         samples 1,20
         method 2
         emission 1
         //absorption <1,1,1> / 30
         //scattering { 1, <0,0,0> }
         confidence 0.9
         variance 1/10
         density {
            density_file df3 concat(concat("data_",str(clock,1,0)),".df3")
            interpolate 1              
            color_map {
[0.0 rgb <0.0,0.0,0.0>]
[0.034482758620689655 rgb <8.793103448275861,3.103448275862069,2.0689655172413794>]
[0.06896551724137931 rgb <17.586206896551722,6.206896551724138,4.137931034482759>]
[0.10344827586206896 rgb <26.379310344827584,9.310344827586206,6.206896551724139>]
[0.13793103448275862 rgb <35.172413793103445,12.413793103448276,8.275862068965518>]
[0.1724137931034483 rgb <43.9655172413793,15.517241379310345,10.344827586206897>]
[0.20689655172413793 rgb <52.75862068965517,18.620689655172413,12.413793103448278>]
[0.24137931034482757 rgb <61.55172413793103,21.724137931034484,14.482758620689657>]
[0.27586206896551724 rgb <70.34482758620689,24.82758620689655,16.551724137931036>]
[0.3103448275862069 rgb <79.13793103448275,27.93103448275862,18.620689655172416>]
[0.3448275862068966 rgb <87.9310344827586,31.03448275862069,20.689655172413794>]
[0.3793103448275862 rgb <96.72413793103448,34.13793103448276,22.758620689655174>]
[0.41379310344827586 rgb <105.51724137931033,37.241379310344826,24.827586206896555>]
[0.4482758620689655 rgb <114.31034482758619,40.3448275862069,26.896551724137932>]
[0.48275862068965514 rgb <123.10344827586206,43.44827586206897,28.965517241379313>]
[0.5172413793103449 rgb <131.8965517241379,46.55172413793103,31.03448275862069>]
[0.5517241379310345 rgb <140.68965517241378,49.6551724137931,33.10344827586207>]
[0.5862068965517241 rgb <149.48275862068965,52.758620689655174,35.17241379310345>]
[0.6206896551724138 rgb <158.2758620689655,55.86206896551724,37.24137931034483>]
[0.6551724137931034 rgb <167.06896551724137,58.96551724137931,39.310344827586206>]
[0.6896551724137931 rgb <175.8620689655172,62.06896551724138,41.37931034482759>]
[0.7241379310344828 rgb <184.65517241379308,65.17241379310344,43.44827586206897>]
[0.7586206896551724 rgb <193.44827586206895,68.27586206896552,45.51724137931035>]
[0.7931034482758621 rgb <202.2413793103448,71.37931034482759,47.58620689655173>]
[0.8275862068965517 rgb <211.03448275862067,74.48275862068965,49.65517241379311>]
[0.8620689655172413 rgb <219.82758620689654,77.58620689655173,51.724137931034484>]
[0.896551724137931 rgb <228.62068965517238,80.6896551724138,53.793103448275865>]
[0.9310344827586207 rgb <237.41379310344826,83.79310344827586,55.862068965517246>]
[0.9655172413793103 rgb <246.20689655172413,86.89655172413794,57.931034482758626>]
[1.0 rgb <255.0,90.0,60.0>]
            }
         }
      }
   }

   box {
      <0,0,0>, <1,1,1>
      pigment { rgbf <1,1,1,1> }
      interior { theinterior }
      hollow
//      translate <-0.5,-0.5,-0.5>
      scale <NX,NY,NZ>
   }

   #declare BoundsBoxRadius = 0.002;
   #declare p1=0;
   #declare p2=<0,0,1>;
   #declare p3=<1,0,1>;
   #declare p4=<1,0,0>;
   #declare p5=<0,1,0>;
   #declare p6=<0,1,1>;
   #declare p7=1;
   #declare p8=<1,1,0>;

        union{
                cylinder{p1,p2 BoundsBoxRadius}
                cylinder{p2,p3 BoundsBoxRadius}
                cylinder{p3,p4 BoundsBoxRadius}
                cylinder{p4,p1 BoundsBoxRadius}
                cylinder{p5,p6 BoundsBoxRadius}
                cylinder{p6,p7 BoundsBoxRadius}
                cylinder{p7,p8 BoundsBoxRadius}
                cylinder{p8,p5 BoundsBoxRadius}
                cylinder{p1,p5 BoundsBoxRadius}
                cylinder{p2,p6 BoundsBoxRadius}
                cylinder{p3,p7 BoundsBoxRadius}
                cylinder{p4,p8 BoundsBoxRadius}
                sphere{p1, BoundsBoxRadius}
                sphere{p2, BoundsBoxRadius}
                sphere{p3, BoundsBoxRadius}
                sphere{p4, BoundsBoxRadius}
                sphere{p5, BoundsBoxRadius}
                sphere{p6, BoundsBoxRadius}
                sphere{p7, BoundsBoxRadius}
                sphere{p8, BoundsBoxRadius}

                texture{pigment{ color rgb 1}} no_shadow
//                translate <-0.5,-0.5,-0.5>
        }
